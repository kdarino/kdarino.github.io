!function(){var e,n,t,r,i,o,a,u,c,l,s,f,d,p;e=function(e){return null===e?"null":void 0===e?"undefined":Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},n=function(e){return function(e){var n=[];for(var t in e){var r=e[t];e.hasOwnProperty(t)&&null!=r&&n.push([encodeURIComponent(t),encodeURIComponent(r)].join("="))}return n.join("&")}}(e),t=function(e){var n="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest,t="JSON"in window,r=!n||!t;return r&&((new Image).src="//errlog.amanad.adtdp.com/unsupported"),function(n,t,i,o){if(r)return o(new Error("this browser is not supported"),null,null);var a=new XMLHttpRequest,u=!1;return a.onreadystatechange=function(){var e=null,n=null;if(o&&!u&&4===a.readyState){if(u=!0,200<=a.status&&a.status<400)try{n=JSON.parse(a.responseText)}catch(t){e=t}else e=new Error("failed to get ad with HTTP Error");o(e,n,a)}},a.onerror=function(e){o&&!u&&(u=!0,o(e,null,a))},"GET"===n&&i&&(t=t+"?"+e(i)),a.open(n,t,!0),a.withCredentials=!0,a.send("POST"===n&&i?JSON.stringify(i):null),a}}(n),r=function(e){return(e||"").replace(/[&"'<>]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},i=function(e){var n=/\$\{([^}]+)\}/g;return function(t,r){var i=document.createElement("div");return i.innerHTML=(t||"").replace(n,function(n,t){return e(r[t]||"")}),i.firstElementChild}}(r),o=function(e,n){var t=document.body;if(t.contains(e))n(e);else if("MutationObserver"in window){var r=new MutationObserver(function(t){t.forEach(function(t){if(t.addedNodes)for(var i,o=0;i=t.addedNodes[o];o++)(i===e||i.contains(e))&&(r.disconnect(),n(e))})});r.observe(t,{childList:!0,subtree:!0})}else e.addEventListener("DOMNodeInserted",function i(t){e.removeEventListener(t.type,i,!1),n(e)},!1)},a=function(){function e(e,n){var t=e.getBoundingClientRect(),r=e.clientHeight,i=e.clientWidth,o=window.innerWidth||document.documentElement.clientWidth,a=window.innerHeight||document.documentElement.clientHeight,u=Math.max(t.top,0),c=Math.min(t.top+r,a),l=Math.max(t.left,0),s=Math.min(t.left+i,o),f=Math.max(c-u,0)*Math.max(s-l,0),d=f/(r*i);return d>=n}return function(n,t,r,i,o){var a=Math.ceil(r/i),u=0,c=setInterval(function(){var r=e(n,t);r?++u>=a&&(o(),clearInterval(c)):u=0},i)}}(),u=function(e){function n(e,t,r){var i=e.document,o=e.parent,a=i.head.querySelectorAll('meta[property^="'+t+':"]['+r+"]");return 0===a.length&&o!==e?n(o,t,r):a}function t(e){for(var n,t={},i=0;n=e[i];i++){var o=n.getAttribute("property").split(":"),a=o[o.length-1];r(a,n.hasAttribute("content")?n.content:null,t)}return t}function r(n,t,r){for(var i=n.split("."),o=i.pop(),a=r,u=0,c=i.length;c>u;u++){var l=i[u];"object"!==e(a[l])&&(a[l]={}),a=a[l]}null!=t?a[o]=t:delete a[o]}return function(e,r){return t(n(window,e,r))}}(e),c=function(e){return function n(t,r){for(var i in r)r.hasOwnProperty(i)&&("object"===e(r[i])&&"object"===e(t[i])?t[i]=n(t[i],r[i]):t[i]=r[i]);return t}}(e),l=function(e){return function n(t,r,i){var i=i||{};for(var o in t){var a=t[o];if(t.hasOwnProperty(o)&&null!=a){var u=[r,o].join(".");"object"===e(a)?n(a,u,i):i[u.slice(1)]=a}}return i}}(e),s=function(e,n,t,r,i,o,a){function u(){}var c=u.prototype;return c.ad=function(n,t){var r="//ad.amanad.adtdp.com/ad";if(n=n||{},n._=new Date-1,n.meta_search===!0){var u=i("aja","data-aja-request");n=o(u,n)}return n=a(n),e("GET",r,n,function(e,n){e||n.ads.forEach(function(e){e.template_id&&n.templates&&n.templates[e.template_id]&&(e.template=n.templates[e.template_id])}),t(e,n)})},c.imp=function(e){e&&e.imp_url&&!e.send_imp&&((new Image).src=e.imp_url,e.send_imp=!0)},c.inview=function(e){e&&e.inview_url&&!e.send_inview&&((new Image).src=e.inview_url,e.send_inview=!0)},c.render=function(e,t){if(e.template&&e.template.body){var r=n(e.template.body,e.content);this.rendered(e,r),t(null,r)}else{var i=Error("this ad-info does not have valid template");i.data=e,t(i,null)}},c.rendered=function(e,n){var i=this;t(n,function(){i.imp(e),r(n,.5,1e3,200,function(){i.inview(e)})})},u}(t,i,o,a,u,c,l),f=function(e,n){function t(n){e.apply(this,n)}var r,i={};return t.prototype=e.prototype,function(e){var o=Array.prototype.slice.call(arguments,1);if("string"==typeof e){var a=e.split("."),u=a.pop(),c=a.pop()||n||"default",l=i[c];"create"===u?(l=i[c]=new t(o),"function"==typeof r&&r(i[c],c)):l[u].apply(l,o)}else"function"==typeof u&&(r=u)}},d=function(e){return function(n){return n=n||{},e("POST","//errlog.amanad.adtdp.com/report",{level:"ERROR",name:n.name,stack:n.stack,message:n.message,file:n.sourceURL||n.fileName,line:n.line||n.lineNumber})}}(t),function(e,n,t){try{var r=window,i=r["com.adtdp.amanad.jssdkname"]||"amn",o=r[i],a=o&&o.q||[];o=r[i]=o&&o.l?o:n(e),o.l=1;for(var u=0,c=a.length;c>u;u++)o.apply(o,a[u])}catch(l){try{t(l)}catch(s){}}}(s,f,d),p=void 0}();