var IMobile;!function(e){}(IMobile||(IMobile={})),function(e){e.newAsn||(e.asn=1,e.newAsn=function(){return window.SPMobile?window.SPMobile.NewAsn():e.asn++})}(IMobile||{});var IMobile;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e,t,n,i,r,o,a){void 0===o&&(o=""),void 0===a&&(a=""),this.advertisementResult=e,this.asid=t,this.pid=n,this.iswebview=i,this.webviewxid=r,this.apiParams=e.api_params,this.idfa=o,this.gaid=a}return e}();e.IMobileAshxResponse=t}(t=e.API||(e.API={}))}(t=e.Native||(e.Native={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(e){var t;!function(e){e.Status={InvalidUserAgent:"invalid useragent",InvalidParameter:"invalid parameter",DeliverAdEmpty:"deliver Ad Empty"},e.DEVICE_INFO=[{name:"iphone4shape",height:480},{name:"iphone5shape",height:568},{name:"iphone6shape",height:667},{name:"iphone6plusshape",height:736}],function(e){e[e.Pc=1]="Pc",e[e.Sp=2]="Sp",e[e.App=3]="App"}(e.Platform||(e.Platform={}));e.Platform;e.PCImageServer="spcdnpc.i-mobile.co.jp",e.SPImageServer="spcdnsp.i-mobile.co.jp",e.PCDeliverServers="spnet1.i-mobile.co.jp,spnet2-1.i-mobile.co.jp,spnet33.i-mobile.co.jp",e.PCDeliverWeight="0,5,5",e.SPDeliverServers="spsvc3.i-mobile.co.jp,spsvc4.i-mobile.co.jp,spsvc5.i-mobile.co.jp",e.SPDeliverWeight="5,4,4",e.RootTrackingServer="spdmg.i-mobile.co.jp",e.TrackingAccessRate="0.03",e.SuffixAllowOrigin="i-mobile.co.jp",e.XidSyncFrameName="restoreXidFrame_",e.XidSyncStorageServer="xid.i-mobile.co.jp",e.XidExpireMillSec="3600000",e.IgnoreSpotIDsForXidMediaRestore="16905,28113,28114,28783,29712,29713,34996",e.RoasAPI="{0}://ltv.i-mobile.co.jp/conversionvalue/put?rid={1}&sid={2}&amt={3}&cls={4}&utctime={5}&currency={6}",e.ScriptPCRootServer="spdeliver.i-mobile.co.jp",e.ScriptSPRootServer="spad.i-mobile.co.jp",e.ScriptSSPRootServer="ssp-adedge.i-mobile.co.jp",e.ScriptIMPRootServer="imp-adedge.i-mobile.co.jp"}(t=e.Const||(e.Const={}))}(t=e.Core||(e.Core={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(t){var n="title",i="description",r="sponsored",o=12,a=35,s=30,c=function(){function t(t){var n=this;this.render=function(t,i,r){var o;if(o=r?[r]:n.spotInfo.display_area,!o)return void(n.spotInfo.debug&&console.log(e.Core.Const.Status.InvalidParameter));if(n.spotInfo.debug&&console.log(i),0!==t.length)for(var a=0,s=0;s<o.length;){var c=o[s];c.num=c.num||1,n.spotInfo.amp&&(c.target_element="#c");for(var d=0;d<c.num&&!(t.length<=a);d++){var l=t[a],u=a<t.length-1&&!!c.separator;n.replaceTemplate(c,l,u),a++}s++}},t.num=this.getRequestNum(t.display_area),this.spotInfo=t}return t.prototype.getRequestNum=function(e){if(!e)return 1;var t=0;for(var n in e){var i=0,r=e[n].num;i="string"==typeof r?parseInt(r,10)||1:r||1,t+=i}return t},t.prototype.replaceTemplate=function(e,t,n){var i=document.querySelector(e.target_element),r=e.template;if(i&&r){for(var o in t)if(this.canTruncate(o))for(var a,s=new RegExp("{{"+o+"(?::([1-9][0-9]*))?}}","g"),c=r;null!=(a=s.exec(c));){var d=null!=a[1]?Number(a[1]):this.getDefaultMaxLength(o);r=r.replace(a[0],this.truncateWithEllipsis(t[o],d))}else r=r.replace(new RegExp("{{"+o+"}}","g"),t[o]);n&&(r+=e.separator),i.innerHTML=i.innerHTML+r}},t.prototype.canTruncate=function(e){return e===n||e===i||e===r},t.prototype.getDefaultMaxLength=function(e){switch(e){case n:return o;case i:return a;case r:return s;default:return 0}},t.prototype.truncateWithEllipsis=function(e,t,n){return void 0===n&&(n="..."),e.length>t?e.substr(0,t)+n:e},t}();t.NativeControllerBase=c}(t=e.Native||(e.Native={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(e){function t(){return"JSON"in window?new i:new n}var n=function(){function e(){}return e.quote=function(t){return e.escapable.lastIndex=0,e.escapable.test(t)?'"'+t.replace(e.escapable,function(t){var n=e.meta[t];return"string"==typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'},e.toJsonStr=function(t,n){var i=n[t];switch(typeof i){case"string":return e.quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";var r=[];if("[object Array]"===Object.prototype.toString.apply(i)){for(var o=i.length,a=0;o>a;a+=1)r[a]=e.toJsonStr(a,i)||"null";return 0===r.length?"[]":"["+r.join(",")+"]"}for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){var c=e.toJsonStr(s,i);c&&r.push(e.quote(s)+":"+c)}return 0===r.length?"{}":"{"+r.join(",")+"}"}},e.prototype.toObj=function(t){try{if(e.validchars.test(t.replace(e.validescape,"@").replace(e.validtokens,"]").replace(e.validbraces,""))){var n=new Function("return "+t)();return n}return null}catch(i){return null}},e.prototype.toText=function(t){try{return e.toJsonStr("",{"":t})}catch(n){return""}},e.validchars=/^[\],:{}\s]*$/,e.validescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e.validtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,e.validbraces=/(?:^|:|,)(?:\s*\[)+/g,e.escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e.meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e}(),i=function(){function e(){}return e.prototype.toObj=function(e){try{return JSON.parse(e)}catch(t){return null}},e.prototype.toText=function(e){try{return JSON.stringify(e)}catch(t){return""}},e}();e.createSimpleJSON=t}(t=e.Core||(e.Core={}))}(IMobile||(IMobile={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},IMobile;!function(e){var t;!function(e){function t(e){try{return s.toObj(e)}catch(t){return null}}function n(){try{var e=i();return null!=e&&e.synced?e.optout&&1==e.optout?null:e.xid?"string"!=typeof e.xid?null:e.xid:null:null}catch(t){return null}}function i(){try{if(!window.localStorage)return null;var e=window.localStorage.getItem("imobile_xid");return null==e?null:c.toObj(e)}catch(t){return null}}function r(e){return c.toText(e)}var o=function(){function e(){}return e}();e.XidEntity=o;var a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(o);e.XidMediaEntity=a;var s=e.createSimpleJSON(),c=e.createSimpleJSON();e.getXidObjFromXidStorage=t,e.getMediaSyncedXid=n,e.getXidObjFromMediaStorage=i,e.getXidTextFromMediaStorage=r}(t=e.Core||(e.Core={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(e){function t(e){return new i(e)}var n=function(){function e(){this.xidSyncFrameName="xidSyncFrame"}return e}();e.XidSynchronizerOption=n;var i=function(){function t(e){this.option=e,this.needSyncToMediaUserFunc=function(){return!1}}return t.incrementFrameNumber=function(){return++t.frameNumber},t.prototype.startSync=function(){var n=this;if(!this.canNotSync())return void(this.canNotSyncFunc&&this.canNotSyncFunc());if(!this.needSyncToMedia()&&this.needSyncToMediaUserFunc&&!this.needSyncToMediaUserFunc()){var i=e.getXidObjFromMediaStorage();return void(this.syncedFunc&&this.syncedFunc(i))}window.addEventListener?(window.addEventListener("message",function(i){if(t.isRightOrigin(i.origin,n.option.suffixAllowOrigin)){var r=e.getXidObjFromXidStorage(i.data);n.setXidToMediaStorage(r),n.syncedFunc&&n.syncedFunc(r)}},!1),window.addEventListener("load",function(){n.appendRestoreFrame()},!1)):(window.attachEvent("onmessage",function(i){if(t.isRightOrigin(i.origin,n.option.suffixAllowOrigin)){var r=e.getXidObjFromXidStorage(i.data);n.setXidToMediaStorage(r),n.syncedFunc&&n.syncedFunc(r)}}),window.attachEvent("onload",function(){n.appendRestoreFrame()}))},t.prototype.getMediaSyncedXid=function(){return e.getMediaSyncedXid()},t.isRightOrigin=function(e,t){var n=e.length-t.length,i=n>=0&&e.lastIndexOf(t)===n;return i},t.prototype.canNotSync=function(){try{return window.localStorage&&window.postMessage}catch(e){return!1}},t.prototype.needSyncToMedia=function(){var t=e.getXidObjFromMediaStorage();return null==t||this.expireXid(t)},t.prototype.setXidToMediaStorage=function(t){try{var n=!1;t&&t.xid&&""!==t.xid&&(n=!0);var i=!1;t&&(t.optout===!0||"true"==t.optout)&&(i=!0);var r=0==n&&null==e.getXidObjFromMediaStorage()?-1:(new Date).getTime(),o={xid:n&&!i?t.xid:"",synced:n,lastSyncTime:r,optout:i};window.localStorage.setItem("imobile_xid",e.getXidTextFromMediaStorage(o))}catch(a){}},t.prototype.expireXid=function(e){if(!e)return!0;var t=e.lastSyncTime+this.option.expireMillSec;return t?t<(new Date).getTime():!0},t.prototype.appendRestoreFrame=function(){var e="http:"==document.location.protocol?"http":"https",n=e+"://"+this.option.xidSyncStorageServer+"/RestoreXidToMediaStorage.html",i=document.createElement("iframe");i.src=n,i.name=this.option.xidSyncFrameName+t.incrementFrameNumber(),i.style&&(i.style.visibility="hidden",i.style.padding="0",i.style.display="none"),i.setAttribute("frameBorder","0"),i.setAttribute("scrolling","no"),i.setAttribute("width","0"),i.setAttribute("height","0"),i.setAttribute("marginwidth","0"),i.setAttribute("marginheight","0"),i.setAttribute("vspace","0"),i.setAttribute("hspace","0"),document.body.appendChild(i)},t.frameNumber=0,t}();e.createXidSynchronizer=t}(t=e.Core||(e.Core={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(e){function t(t){if(!t)throw new Error("config is null");t.waitReadyDOM=t.waitReadyDOM||!1;var n=t.scripts;if(!e.Util.isArray(n))throw new Error("config is not Array");for(var i={isCompleted:!1,completedFunc:function(){},completed:function(t){return e.Util.isFunction(t)&&(i.completedFunc=t),i},_onCompleted:function(){i.isCompleted=!0,i.completedFunc&&i.completedFunc()}},r=n.length,c=0;r>c;c++){var l=n[c];if(!l.name)throw new Error("not exist name property");if(!l.url)throw new Error("not exist url property");l.async=l.async||d.async,l.charset=l.charset||d.charset,l.completed=!1,a(l,function(){if(o(n)===!0){if(!t.waitReadyDOM)return void i._onCompleted();s(function(){i._onCompleted()})}})}return i}var n=/^(complete|loaded)$/,i=document.getElementsByTagName("head")[0],r=function(e){var t=document.createElement("script");return t.type="text/javascript",t.charset=e.charset,e.async===!0&&t.async&&(t.async=!0),t},o=function(e){for(var t=e.length,n=0;t>n;n++){var i=e[n];if(!i.completed)return!1}return!0},a=function(t,o){var a=r(t),s=function(i){if("load"===i.type||n.test((i.currentTarget||i.srcElement).readyState)){if(a.addEventListener?a.removeEventListener("load",s,!1):a.attachEvent?a.detachEvent("onreadystatechange",s):a.onload=null,t.completed===!0)return;t.completed=!0,e.Util.isFunction(t.loaded)&&t.loaded(t),e.Util.isFunction(o)&&o(t)}};a.addEventListener?a.addEventListener("load",s,!1):a.attachEvent?a.attachEvent("onreadystatechange",s):a.onload=s,a.src=t.url,i.appendChild(a)},s=function(e){if(document.addEventListener){if(n.test(document.readyState))return void e();var t=function(){window.removeEventListener("load",t,!1),document.removeEventListener("DOMContentLoaded",t,!1),e()};window.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)}else if(document.attachEvent){var i=!1;try{i=null==window.frameElement}catch(r){}document.documentElement.doScroll&&i?c(e):document.attachEvent("onload",e)}},c=function(e){var t=this;try{document.documentElement.doScroll("left")}catch(n){return void setTimeout(function(){t._checkScroll(e)},64)}e()};e.DomReady=s;var d={async:!1,charset:"utf-8"};e.loadScript=t}(t=e.Core||(e.Core={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(t){var n=function(){function n(){}return n.isIPhone=function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("iphone")||-1!=e.indexOf("ipod")||-1!=e.indexOf("ipad")},n.isAndroid=function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("android")?!0:!1},n.isWindowsPhone=function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("windows phone")?!0:!1},n.isSupportAgent=function(){return n.isIPhone()||n.isAndroid()||n.isWindowsPhone()},n.getEstimatedDeviceName=function(){if(!n.isIPhone())return null;var e=t.Const.DEVICE_INFO.find(function(e){return screen.height===e.height});return null!=e?e.name:null},n.getScreenSize=function(){if(n.isIPhone()){var e=parseFloat(window.orientation),t=isNaN(e)?!1:Math.abs(e)%180==90;return{width:t?screen.height:screen.width,height:t?screen.width:screen.height}}return{width:window.screenX+window.outerWidth,height:window.screenY+window.outerHeight}},n.supportXHRLv2=function(){if(XMLHttpRequest){var e=new XMLHttpRequest;return"withCredentials"in e}return!1},n.getAjaxResponse=function(e,t){if(n.supportXHRLv2()){var i=new XMLHttpRequest;i.open("GET",e,!0),i.withCredentials=!0,i.onreadystatechange=function(){4==i.readyState&&200==i.status&&t(i.responseText)},i.send(null)}else if(window.XDomainRequest){var r=new window.XDomainRequest;r.open("GET",e),r.onload=function(){t(r.responseText)},r.send(null)}},n.getSyncedXid=function(e){var i={suffixAllowOrigin:t.Const.SuffixAllowOrigin,xidSyncFrameName:t.Const.XidSyncFrameName,xidSyncStorageServer:t.Const.XidSyncStorageServer,expireMillSec:+t.Const.XidExpireMillSec},r=t.createXidSynchronizer(i);return r.needSyncToMediaUserFunc=function(){return n.ignoreSpotForXidMediaRestore(e)},r.startSync(),r.getMediaSyncedXid()},n.ignoreSpotForXidMediaRestore=function(e){if(null==e)return!1;for(var n=t.Const.IgnoreSpotIDsForXidMediaRestore.split(","),i=n.length,r=0;i>r;r++)if(n[r]==e)return!0;return!1},n.visit=function(t){var n="http:"==document.location.protocol?"http":"https",i=function(){if(t&&window.SPDemographic)try{window.SPDemographic.createGateway().executeVisit(t)}catch(e){}},r={name:"dg_gateway",async:!0,url:n+"://"+e.Core.Const.RootTrackingServer+"/script/dg_gateway.js?20120208"},o={scripts:[r],waitReadyDOM:!1};e.Core.loadScript(o).completed(i)},n.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n}();t.Util=n}(t=e.Core||(e.Core={}))}(IMobile||(IMobile={})),Array.prototype.find||(Array.prototype.find=function(e){for(var t,n=Object(this),i=n.length>>>0,r=arguments[1],o=0;i>o;o++)if(t=n[o],e.call(r,t,o,n))return t;return void 0});var IMobile;!function(IMobile){var NetworkLoadBalance;!function(NetworkLoadBalance){var Base=function(){function Base(){}return Base.getUrl=function(e,t,n,i){n=n||!1;var r="http:"==document.location.protocol?"http":"https";if(!n){var o=IMobile.Core.Util.getSyncedXid(i);null!=o&&(t+=(t.indexOf("?",0)>-1?"&":"?")+"xid="+o)}return r+"://"+e+"/"+t},Base.selectServer=function(servers,rate){for(var svrs=servers.split(","),drts=rate.split(","),total=0,i=0;i<drts.length;i++)total+=eval(drts[i]);for(var score=Math.floor(Math.random()*total),sum=0,idx=0,j=0;j<svrs.length;j++)if(sum+=eval(drts[j]),sum>score){idx=j;break}return svrs[idx]},Base.selectServerBySpotId=function(e,t,n){for(var i=e.split(","),r=t.split(","),o=0,a=0;a<r.length;a++)o+=parseInt(r[a]);for(var s=0,c=n%o,d=0;d<i.length;d++)if(s+=parseInt(r[d]),s>c)return i[d];return i[0]},Base}();NetworkLoadBalance.Base=Base}(NetworkLoadBalance=IMobile.NetworkLoadBalance||(IMobile.NetworkLoadBalance={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(t){var n=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.getImageServer=function(){return e.Core.Const.SPImageServer},n.getSpotServer=function(t,i){return"undefined"==typeof t?"spnet1.i-mobile.co.jp":"undefined"==typeof i?n.selectServerBySpotId(e.Core.Const.SPDeliverServers,e.Core.Const.SPDeliverWeight,t):n.selectServerBySpotId(e.Core.Const.SPDeliverServers,e.Core.Const.SPDeliverWeight,t)},n}(e.NetworkLoadBalance.Base);t.SP=n}(t=e.NetworkLoadBalance||(e.NetworkLoadBalance={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(){}return e}();e.IRecoApiResult=t}(t=e.API||(e.API={}))}(t=e.Native||(e.Native={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(t){var n=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.getImageServer=function(){return e.Core.Const.PCImageServer},n.getSpotServer=function(){return n.selectServer(e.Core.Const.PCDeliverServers,e.Core.Const.PCDeliverWeight)},n}(e.NetworkLoadBalance.Base);t.PC=n}(t=e.NetworkLoadBalance||(e.NetworkLoadBalance={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(t){var n;!function(t){var n=function(){function t(e,n,i,r,o,a){var s=e.pid,c=e.asid,d=e.advertisementResult.advid,l=e.advertisementResult.ctid,u=e.advertisementResult.vh,p=e.iswebview,v=e.webviewxid,f=e.advertisementResult.sponsored,h=e.idfa,g=e.gaid,m="pid="+s+"&asid="+c+"&advid="+d+"&ctid="+l+"&vh="+u+(h?"&idfa="+h:"")+(g?"&gaid="+g:"");p&&(m=m+"&wv=1"+(v?"&wvxid="+v:"")),m+="&rtn="+r,this.title=n,this.description=i,this.click_url=t.getUrl(a,"ad_link.ashx?"+m,!1,c,s),this.image_url=o,this.sponsored=f}return t.getUrl=function(t,n,i,r,o){var a;switch(t){case e.Core.Const.Platform.Pc:a=e.NetworkLoadBalance.PC.getUrl(e.NetworkLoadBalance.PC.getSpotServer(),n,i,r);break;case e.Core.Const.Platform.Sp:a=e.NetworkLoadBalance.SP.getUrl(e.NetworkLoadBalance.SP.getSpotServer(r,o),n,i,r);break;default:a=""}return a},t}();t.ApiAdvertisement=n}(n=t.API||(t.API={}))}(t=e.Native||(e.Native={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(e){var t;!function(e){!function(e){e[e.IReco=1]="IReco"}(e.Native3PASType||(e.Native3PASType={}));e.Native3PASType}(t=e.API||(e.API={}))}(t=e.Native||(e.Native={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(t){var n;!function(t){var n=function(){function n(){}return n.render=function(t,i,r,o,a,s,c,d){if(null==c&&(c=0,d=i.length),c>d)return void(t.length>0&&s(t,r,o));if(0===i.length)return void s(t,r,o);var l=i.shift(),u=l.apiParams.call_url;e.Core.Util.getAjaxResponse(u,function(e){var u=n.createApiAdvertisement(e,l,a);u&&t.push(u),n.render(t,i,r,o,a,s,++c,d)})},n.createApiAdvertisement=function(n,i,r){var o,a,s,c;switch(i.apiParams.type){case t.Native3PASType.IReco:var d=e.Core.createSimpleJSON().toObj(n);d&&(o=d.title,a=d.description,s=d.clickUrl,c=decodeURIComponent(d.imageUrl))}return o&&a&&s&&c?new t.ApiAdvertisement(i,o,a,s,c,r):null},n}();t.Native3PASRenderer=n}(n=t.API||(t.API={}))}(t=e.Native||(e.Native={}))}(IMobile||(IMobile={}));var IMobile;!function(e){var t;!function(t){var n;!function(n){function i(t){t&&t.asid&&t.pid&&(e.Core.Util.isSupportAgent()?new e.Native.SP.NativeController(t):t.debug&&console.log(e.Core.Const.Status.InvalidUserAgent),+e.Core.Const.TrackingAccessRate>Math.random()&&e.Core.Util.visit(t.asid))}var r=function(n){function i(i){var r=this;n.call(this,i),this.preRender=function(n,i,o,a){i&&0!==i.length?t.API.Native3PASRenderer.render(n,i,o,a,e.Core.Const.Platform.Sp,r.render):r.render(n,o,a)};var a=new o(this.spotInfo);a.getAds(this.preRender)}return __extends(i,n),i}(t.NativeControllerBase);n.NativeController=r;var o=function(){function n(i){var r=this;if(this.getAds=function(i){if(e.Core.Util.isSupportAgent()){var o=[],s=[],c="pid="+r.pid+"&asid="+r.asid+"&asn="+r.asn+"&nativeNum="+r.num+(r.amp?"&amp=true":"")+(r.idfa?"&idfa="+r.idfa:"")+(r.gaid?"&gaid="+r.gaid:""),d=e.Core.Util.getEstimatedDeviceName(),l=e.NetworkLoadBalance.SP.getUrl(e.NetworkLoadBalance.SP.getSpotServer(r.asid,r.pid),"ajax/ad_native.ashx?"+c+(void 0==window.devicePixelRatio||1==window.devicePixelRatio?"":"&dpr="+window.devicePixelRatio),!1,r.asid)+(d?"&dvname="+d:"");e.Core.Util.getAjaxResponse(l,function(c){var d=n.jsonConverter.toObj(c),l=d.result,u=null;if(l){u=l.display_area;for(var p in l.ads){var v=l.ads[p],f="webview"===l.vtype;if(v.api_params&&v.api_params.type>0&&v.api_params.call_url){var h=new t.API.IMobileAshxResponse(v,l.asid,r.pid,f,l.wvxid,r.idfa,r.gaid);s.push(h)}else{var h=new a(v,l.asid,r.pid,f,l.wvxid,r.idfa,r.gaid);o.push(h)}}}else d.status==e.Core.Const.Status.DeliverAdEmpty&&window.console&&console.log(d.status);i(o,s,d.status,u)})}else i(null,null,e.Core.Const.Status.InvalidUserAgent,null)},!i||!i.asid||!i.pid)throw new TypeError("invalid parameter");this.asid=i.asid,this.pid=i.pid,this.num=i.num||1,this.asn=e.newAsn(),this.amp=i.amp,this.idfa=e.Core.Util.isIPhone()?i.dvid:"",this.gaid=e.Core.Util.isAndroid()?i.dvid:""}return n.jsonConverter=e.Core.createSimpleJSON(),n}(),a=function(){function t(t,n,i,r,o,a,s){var c="pid="+i+"&asid="+n+"&advid="+t.advid+"&ctid="+t.ctid+"&vh="+t.vh+(a?"&idfa="+a:"")+(s?"&gaid="+s:"");r&&(c=c+"&wv=1"+(o?"&wvxid="+o:"")),this.title=t.title,this.description=t.description,this.click_url=e.NetworkLoadBalance.SP.getUrl(e.NetworkLoadBalance.SP.getSpotServer(n,i),"ad_link.ashx?"+c,!1,n),this.image_url=e.NetworkLoadBalance.SP.getUrl(e.NetworkLoadBalance.SP.getImageServer(),"ad_creative.ashx?advid="+t.advid+"&eid="+t.eid,!0),this.sponsored=t.sponsored}return t}();n.showAds=i}(n=t.SP||(t.SP={}))}(t=e.Native||(e.Native={}))}(IMobile||(IMobile={}));var imobile_spot_info;!function(){if(imobile_spot_info){var e=null;try{e=imobile_spot_info,imobile_spot_info=null}catch(t){}IMobile.Native.SP.showAds(e)}}();